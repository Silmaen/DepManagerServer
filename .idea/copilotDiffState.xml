<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/server/data/static/css/components.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/server/data/static/css/components.css" />
              <option name="originalContent" value="/* Buttons */&#10;.btn {&#10;    display: inline-flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    padding: var(--spacing-sm) var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    background-color: var(--bg-button);&#10;    color: var(--text-primary);&#10;    font-weight: 600;&#10;    text-transform: uppercase;&#10;    transition: all var(--transition-fast);&#10;    border: 1px solid transparent;&#10;}&#10;&#10;.btn:hover {&#10;    background-color: var(--bg-button-hover);&#10;    color: var(--color-primary-light);&#10;    transform: translateY(-1px);&#10;}&#10;&#10;.btn-icon {&#10;    padding: var(--spacing-xs);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.btn-danger {&#10;    background-color: var(--bg-danger);&#10;}&#10;&#10;.btn-danger:hover {&#10;    background-color: var(--bg-danger-hover);&#10;}&#10;&#10;/* Cards */&#10;.card {&#10;    background-color: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    padding: var(--spacing-lg);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.card-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding-bottom: var(--spacing-md);&#10;    border-bottom: 2px solid var(--border-color);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.card-title {&#10;    font-size: 1.5em;&#10;    color: var(--text-title);&#10;    font-weight: 600;&#10;}&#10;&#10;/* Forms */&#10;.form-group {&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.form-control {&#10;    width: 100%;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    border-radius: var(--border-radius-sm);&#10;    border: 1px solid var(--border-color);&#10;    background: var(--bg-surface-hover);&#10;    color: var(--text-primary);&#10;    transition: border-color var(--transition-fast);&#10;}&#10;&#10;.form-control:focus {&#10;    outline: none;&#10;    border-color: var(--color-primary-light);&#10;    box-shadow: 0 0 0 3px rgba(73, 135, 252, 0.1);&#10;}&#10;&#10;/* Badges */&#10;.badge {&#10;    display: inline-flex;&#10;    align-items: center;&#10;    padding: 0.25em 0.75em;&#10;    border-radius: 1em;&#10;    font-size: 0.85em;&#10;    font-weight: 600;&#10;}&#10;&#10;.badge-success {&#10;    background-color: var(--color-success-bg-hover);&#10;    color: var(--color-success);&#10;}&#10;&#10;.badge-danger {&#10;    background-color: var(--color-danger-bg-hover);&#10;    color: var(--color-danger);&#10;}&#10;&#10;/* Table */&#10;.table {&#10;    width: 100%;&#10;    border-collapse: collapse;&#10;}&#10;&#10;.table th,&#10;.table td {&#10;    padding: var(--spacing-sm);&#10;    text-align: left;&#10;    border-bottom: 1px solid var(--border-color);&#10;}&#10;&#10;.table th {&#10;    color: var(--text-title);&#10;    font-weight: 600;&#10;    text-transform: uppercase;&#10;    font-size: 0.9em;&#10;}&#10;&#10;.table tbody tr:hover {&#10;    background-color: var(--bg-surface-hover);&#10;}&#10;&#10;/* Utility classes */&#10;.flex {&#10;    display: flex;&#10;}&#10;&#10;.flex-col {&#10;    flex-direction: column;&#10;}&#10;&#10;.items-center {&#10;    align-items: center;&#10;}&#10;&#10;.justify-between {&#10;    justify-content: space-between;&#10;}&#10;&#10;.gap-sm {&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.gap-md {&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.text-center {&#10;    text-align: center;&#10;}&#10;&#10;.mt-md {&#10;    margin-top: var(--spacing-md);&#10;}&#10;&#10;.mb-md {&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.w-full {&#10;    width: 100%;&#10;}&#10;&#10;/* Stats cards */&#10;.stats-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: var(--spacing-md);&#10;    margin: var(--spacing-md) 0;&#10;}&#10;&#10;.stat-card {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-lg);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    border: 1px solid var(--border-color);&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;.stat-card:hover {&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.stat-card i {&#10;    font-size: 2.5rem;&#10;    color: var(--color-primary-light);&#10;}&#10;&#10;.stat-content {&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;.stat-value {&#10;    font-size: 2rem;&#10;    font-weight: bold;&#10;    color: var(--text-title);&#10;}&#10;&#10;.stat-label {&#10;    font-size: 0.9rem;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;/* Info box */&#10;.info-box {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-lg);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    border-left: 4px solid var(--color-primary-light);&#10;}&#10;&#10;.info-box i {&#10;    font-size: 1.5rem;&#10;    color: var(--color-primary-light);&#10;    margin-top: 0.2rem;&#10;}&#10;&#10;/* Action cards */&#10;.action-card {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-lg);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;}&#10;&#10;.action-info {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-md);&#10;}&#10;&#10;.action-info i {&#10;    font-size: 1.5rem;&#10;    color: var(--color-warning);&#10;    margin-top: 0.2rem;&#10;}&#10;&#10;/* Form improvements */&#10;.import-form {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.form-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.form-group label {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    margin-bottom: var(--spacing-xs);&#10;    color: var(--text-secondary);&#10;    font-weight: 600;&#10;}&#10;&#10;.form-group input {&#10;    width: 100%;&#10;}&#10;&#10;/* Form inputs dark theme */&#10;input[type=&quot;text&quot;],&#10;input[type=&quot;url&quot;],&#10;input[type=&quot;password&quot;],&#10;input[type=&quot;email&quot;],&#10;select,&#10;textarea {&#10;    background-color: var(--bg-surface-hover);&#10;    border: 1px solid var(--border-color);&#10;    color: var(--text-primary);&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    border-radius: var(--border-radius-sm);&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;input[type=&quot;text&quot;]:focus,&#10;input[type=&quot;url&quot;]:focus,&#10;input[type=&quot;password&quot;]:focus,&#10;input[type=&quot;email&quot;]:focus,&#10;select:focus,&#10;textarea:focus {&#10;    outline: none;&#10;    border-color: var(--color-primary-light);&#10;    background-color: var(--bg-surface);&#10;    box-shadow: 0 0 0 3px rgba(73, 135, 252, 0.1);&#10;}&#10;&#10;input[type=&quot;text&quot;]::placeholder,&#10;input[type=&quot;url&quot;]::placeholder,&#10;input[type=&quot;password&quot;]::placeholder,&#10;input[type=&quot;email&quot;]::placeholder,&#10;textarea::placeholder {&#10;    color: var(--text-muted);&#10;}&#10;&#10;/* Profile &amp; Login Forms */&#10;.profile-info,&#10;.login-form {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.profile-section {&#10;    background: var(--bg-surface-hover);&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;}&#10;&#10;.profile-section h4 {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    color: var(--text-title);&#10;    margin-bottom: var(--spacing-md);&#10;    font-size: 1.1em;&#10;}&#10;&#10;.info-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.info-item {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-xs);&#10;}&#10;&#10;.info-item label {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    color: var(--text-secondary);&#10;    font-weight: 600;&#10;    font-size: 0.9em;&#10;}&#10;&#10;.info-item span {&#10;    padding: var(--spacing-sm);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-sm);&#10;    border: 1px solid var(--border-color);&#10;}&#10;&#10;.permissions-grid {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.permission-group {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.permission-group label {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    font-weight: 600;&#10;}&#10;&#10;.permission-icons {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.permission-icons i {&#10;    font-size: 1.3em;&#10;}&#10;&#10;.permission-icons i.perm {&#10;    color: var(--color-success);&#10;}&#10;&#10;.permission-icons i.noperm {&#10;    color: var(--color-danger);&#10;}&#10;&#10;.profile-actions {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    flex-wrap: wrap;&#10;}&#10;&#10;.form-description {&#10;    text-align: center;&#10;    color: var(--text-secondary);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.login-links {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-sm);&#10;    padding-top: var(--spacing-md);&#10;    border-top: 1px solid var(--border-color);&#10;}&#10;&#10;.form-error {&#10;    color: var(--color-danger);&#10;    font-size: 0.9em;&#10;    margin-top: var(--spacing-xs);&#10;}&#10;&#10;/* Article components */&#10;.Article {&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    overflow: hidden;&#10;    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);&#10;    margin-bottom: var(--spacing-lg);&#10;}&#10;&#10;.ArticleHeader {&#10;    background: var(--bg-surface-hover);&#10;    padding: var(--spacing-lg);&#10;    border-bottom: 2px solid var(--border-color);&#10;}&#10;&#10;.ArticleHeader h3 {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    color: var(--text-title);&#10;    font-size: 1.5em;&#10;}&#10;&#10;.ArticleContent {&#10;    padding: var(--spacing-lg);&#10;}&#10;&#10;.ArticleFooter {&#10;    background: var(--bg-surface-hover);&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    border-top: 1px solid var(--border-color);&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .info-grid {&#10;        grid-template-columns: 1fr;&#10;    }&#10;&#10;    .profile-actions {&#10;        flex-direction: column;&#10;    }&#10;&#10;    .profile-actions .btn {&#10;        width: 100%;&#10;    }&#10;}&#10;&#10;/* Users table */&#10;.users-table-container {&#10;    overflow-x: auto;&#10;    max-width: 100%;&#10;}&#10;&#10;.users-table {&#10;    width: 100%;&#10;    border-collapse: collapse;&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-md);&#10;    table-layout: fixed;&#10;}&#10;&#10;.users-table thead {&#10;    background: var(--bg-surface);&#10;    position: sticky;&#10;    top: 0;&#10;    z-index: 1;&#10;}&#10;&#10;.users-table th {&#10;    padding: var(--spacing-sm) var(--spacing-xs);&#10;    text-align: left;&#10;    color: var(--text-title);&#10;    font-weight: 600;&#10;    border-bottom: 2px solid var(--border-color);&#10;    font-size: 0.85em;&#10;}&#10;&#10;.users-table th:first-child {&#10;    width: 15%;&#10;}&#10;&#10;.users-table th:nth-child(2) {&#10;    width: 15%;&#10;}&#10;&#10;.users-table th:not(:first-child):not(:nth-child(2)):not(:last-child) {&#10;    width: 10%;&#10;}&#10;&#10;.users-table th:last-child {&#10;    width: 8%;&#10;}&#10;&#10;.users-table th i {&#10;    margin-right: var(--spacing-xs);&#10;}&#10;&#10;.users-table td {&#10;    padding: var(--spacing-sm) var(--spacing-xs);&#10;    border-bottom: 1px solid var(--border-color);&#10;}&#10;&#10;.users-table tbody tr {&#10;    transition: background-color var(--transition-fast);&#10;}&#10;&#10;.users-table tbody tr:hover {&#10;    background: var(--bg-surface);&#10;}&#10;&#10;.user-name {&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;    white-space: nowrap;&#10;}&#10;&#10;.perm-cell {&#10;    padding: var(--spacing-xs) !important;&#10;}&#10;&#10;.btn-perm {&#10;    padding: var(--spacing-xs);&#10;    border-radius: var(--border-radius-sm);&#10;    background-color: var(--bg-surface);&#10;    color: var(--text-muted);&#10;    transition: all var(--transition-fast);&#10;    border: 1px solid var(--border-color);&#10;}&#10;&#10;.btn-perm:hover {&#10;    background-color: var(--bg-button-hover);&#10;    transform: scale(1.1);&#10;}&#10;&#10;.btn-perm.active {&#10;    background-color: var(--color-success-bg-hover);&#10;    color: var(--color-success);&#10;    border-color: var(--color-success);&#10;}&#10;&#10;.btn-perm.active:hover {&#10;    background-color: var(--color-success-bg-strong);&#10;}&#10;&#10;/* Maintenance page */&#10;.maintenance-container {&#10;    display: flex;&#10;    flex-direction: column;&#10;    align-items: center;&#10;    gap: var(--spacing-xl);&#10;    padding: var(--spacing-xl) 0;&#10;}&#10;&#10;.maintenance-icon {&#10;    display: flex;&#10;    justify-content: center;&#10;    align-items: center;&#10;}&#10;&#10;.loader {&#10;    width: 80px;&#10;    height: 80px;&#10;    border: 8px solid var(--border-color);&#10;    border-top-color: var(--color-primary-light);&#10;    border-radius: 50%;&#10;    animation: spin 1s linear infinite;&#10;}&#10;&#10;@keyframes spin {&#10;    to {&#10;        transform: rotate(360deg);&#10;    }&#10;}&#10;&#10;.maintenance-message {&#10;    text-align: center;&#10;    max-width: 600px;&#10;}&#10;&#10;.maintenance-message h4 {&#10;    color: var(--text-title);&#10;    font-size: 1.5em;&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.maintenance-message p {&#10;    color: var(--text-secondary);&#10;    margin-bottom: var(--spacing-md);&#10;    line-height: 1.6;&#10;}&#10;&#10;.maintenance-warning {&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: var(--spacing-sm);&#10;    padding: var(--spacing-md);&#10;    background: var(--color-warning-bg);&#10;    border: 1px solid var(--color-warning);&#10;    border-radius: var(--border-radius-md);&#10;    color: var(--color-warning);&#10;    font-weight: 600;&#10;}&#10;&#10;.maintenance-warning i {&#10;    font-size: 1.2em;&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .maintenance-container {&#10;        padding: var(--spacing-lg) var(--spacing-md);&#10;    }&#10;&#10;    .loader {&#10;        width: 60px;&#10;        height: 60px;&#10;        border-width: 6px;&#10;    }&#10;&#10;    .maintenance-message h4 {&#10;        font-size: 1.2em;&#10;    }&#10;}&#10;&#10;/* Package filter form */&#10;.package-filter-form {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.filter-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.filter-actions {&#10;    display: flex;&#10;    justify-content: flex-end;&#10;}&#10;&#10;/* Packages grid */&#10;.packages-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;/* Package card */&#10;.package-card {&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    overflow: hidden;&#10;    box-shadow: var(--shadow-sm);&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;.package-card:hover {&#10;    box-shadow: var(--shadow-lg);&#10;    transform: translateY(-2px);&#10;}&#10;&#10;.package-card-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-surface-hover);&#10;    border-bottom: 2px solid var(--border-color);&#10;}&#10;&#10;.package-name {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    font-weight: 600;&#10;    font-size: 1.1em;&#10;    color: var(--text-title);&#10;}&#10;&#10;.package-card-content {&#10;    padding: 0;&#10;}&#10;&#10;.package-card-content.open {&#10;    padding: var(--spacing-md);&#10;}&#10;&#10;/* Package version box */&#10;.package-version-box {&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-md);&#10;    margin-bottom: var(--spacing-sm);&#10;    overflow: hidden;&#10;}&#10;&#10;.package-version-box:last-child {&#10;    margin-bottom: 0;&#10;}&#10;&#10;.package-version-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    background: var(--bg-surface);&#10;}&#10;&#10;.version-badge {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    font-weight: 600;&#10;    color: var(--color-primary-light);&#10;}&#10;&#10;.version-date {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    color: var(--text-secondary);&#10;    font-size: 0.9em;&#10;}&#10;&#10;/* Package flavors */&#10;.package-flavors {&#10;    padding: 0;&#10;}&#10;&#10;.package-flavors.open {&#10;    padding: var(--spacing-sm);&#10;}&#10;&#10;.flavor-item {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;    padding: var(--spacing-sm);&#10;    background: var(--bg-body);&#10;    border-radius: var(--border-radius-sm);&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.flavor-item:last-child {&#10;    margin-bottom: 0;&#10;}&#10;&#10;.flavor-badge {&#10;    display: inline-flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    padding: 0.25em 0.5em;&#10;    background: var(--bg-surface);&#10;    border: 1px solid var(--border-color);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: 0.85em;&#10;    color: var(--text-primary);&#10;}&#10;&#10;/* Empty state */&#10;.empty-state {&#10;    display: flex;&#10;    flex-direction: column;&#10;    align-items: center;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-xl);&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.empty-state i {&#10;    font-size: 4em;&#10;    color: var(--text-muted);&#10;}&#10;&#10;/* Responsive */&#10;@media (max-width: 1024px) {&#10;    .packages-grid {&#10;        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));&#10;    }&#10;&#10;    .filter-grid {&#10;        grid-template-columns: 1fr;&#10;    }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .packages-grid {&#10;        grid-template-columns: 1fr;&#10;    }&#10;}&#10;&#10;/* Package detail */&#10;.detail-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.package-detail-grid {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.flavor-detail-item {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-sm);&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-body);&#10;    border-radius: var(--border-radius-sm);&#10;    margin-bottom: var(--spacing-sm);&#10;}&#10;&#10;.flavor-detail-item:last-child {&#10;    margin-bottom: 0;&#10;}&#10;&#10;.flavor-info-section {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    gap: var(--spacing-md);&#10;    flex-wrap: wrap;&#10;}&#10;&#10;.flavor-badges {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;    flex: 1;&#10;}&#10;&#10;.flavor-size-badge {&#10;    margin-left: auto;&#10;}&#10;&#10;.flavor-dependencies {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-xs);&#10;    padding: var(--spacing-sm);&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-sm);&#10;    border-left: 3px solid var(--color-primary-light);&#10;}&#10;&#10;.dependencies-title {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    font-size: 0.9em;&#10;    font-weight: 600;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.dependencies-list-inline {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;}&#10;&#10;.dep-badge {&#10;    background: var(--bg-surface);&#10;    border-color: var(--color-primary-light);&#10;    display: inline-flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;}&#10;&#10;.dep-name {&#10;    font-weight: 600;&#10;}&#10;&#10;.flavor-actions {&#10;    display: flex;&#10;    justify-content: flex-end;&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .detail-header {&#10;        flex-direction: column;&#10;        align-items: stretch;&#10;    }&#10;&#10;    .detail-header .btn {&#10;        width: 100%;&#10;        justify-content: center;&#10;    }&#10;&#10;    .flavor-detail-item {&#10;        flex-direction: column;&#10;        align-items: stretch;&#10;    }&#10;&#10;    .flavor-detail-item form {&#10;        width: 100%;&#10;    }&#10;&#10;    .flavor-detail-item button {&#10;        width: 100%;&#10;    }&#10;&#10;    .flavor-info-section {&#10;        flex-direction: column;&#10;        align-items: stretch;&#10;    }&#10;&#10;    .flavor-size-badge {&#10;        margin-left: 0;&#10;    }&#10;&#10;    .flavor-actions {&#10;        width: 100%;&#10;    }&#10;&#10;    .flavor-actions button {&#10;        width: 100%;&#10;    }&#10;}&#10;&#10;/* Messages */&#10;.message-success {&#10;    border-color: var(--color-success);&#10;    background: var(--color-success-bg);&#10;    color: var(--color-success);&#10;}&#10;&#10;.message-error {&#10;    border-color: var(--color-danger);&#10;    background: var(--color-danger-bg);&#10;    color: var(--color-danger);&#10;}&#10;&#10;.message-warning {&#10;    border-color: var(--color-warning);&#10;    background: var(--color-warning-bg);&#10;    color: var(--color-warning);&#10;}&#10;&#10;.message-info {&#10;    border-color: var(--color-primary-light);&#10;    background: var(--color-primary-bg);&#10;    color: var(--color-primary-light);&#10;}&#10;&#10;/* Language selector */&#10;.language-selector {&#10;    display: flex;&#10;    align-items: center;&#10;}&#10;&#10;.language-select {&#10;    width: auto;&#10;    min-width: 80px;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    font-size: 0.9em;&#10;    cursor: pointer;&#10;    appearance: none;&#10;    background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%234987fc' d='M6 9L1 4h10z'/%3E%3C/svg%3E&quot;);&#10;    background-repeat: no-repeat;&#10;    background-position: right var(--spacing-sm) center;&#10;    padding-right: calc(var(--spacing-md) + 16px);&#10;}&#10;&#10;.language-select:hover {&#10;    border-color: var(--color-primary-light);&#10;    background-color: var(--bg-surface);&#10;}&#10;" />
              <option name="updatedContent" value="/* Buttons */&#10;.btn {&#10;    display: inline-flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    padding: var(--spacing-sm) var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;    background-color: var(--bg-button);&#10;    color: var(--text-primary);&#10;    font-weight: 600;&#10;    text-transform: uppercase;&#10;    transition: all var(--transition-fast);&#10;    border: 1px solid transparent;&#10;}&#10;&#10;.btn:hover {&#10;    background-color: var(--bg-button-hover);&#10;    color: var(--color-primary-light);&#10;    transform: translateY(-1px);&#10;}&#10;&#10;.btn-icon {&#10;    padding: var(--spacing-xs);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.btn-danger {&#10;    background-color: var(--bg-danger);&#10;}&#10;&#10;.btn-danger:hover {&#10;    background-color: var(--bg-danger-hover);&#10;}&#10;&#10;/* Cards */&#10;.card {&#10;    background-color: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    padding: var(--spacing-lg);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.card-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding-bottom: var(--spacing-md);&#10;    border-bottom: 2px solid var(--border-color);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.card-title {&#10;    font-size: 1.5em;&#10;    color: var(--text-title);&#10;    font-weight: 600;&#10;}&#10;&#10;/* Forms */&#10;.form-group {&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.form-control {&#10;    width: 100%;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    border-radius: var(--border-radius-sm);&#10;    border: 1px solid var(--border-color);&#10;    background: var(--bg-surface-hover);&#10;    color: var(--text-primary);&#10;    transition: border-color var(--transition-fast);&#10;}&#10;&#10;.form-control:focus {&#10;    outline: none;&#10;    border-color: var(--color-primary-light);&#10;    box-shadow: 0 0 0 3px rgba(73, 135, 252, 0.1);&#10;}&#10;&#10;/* Badges */&#10;.badge {&#10;    display: inline-flex;&#10;    align-items: center;&#10;    padding: 0.25em 0.75em;&#10;    border-radius: 1em;&#10;    font-size: 0.85em;&#10;    font-weight: 600;&#10;}&#10;&#10;.badge-success {&#10;    background-color: var(--color-success-bg-hover);&#10;    color: var(--color-success);&#10;}&#10;&#10;.badge-danger {&#10;    background-color: var(--color-danger-bg-hover);&#10;    color: var(--color-danger);&#10;}&#10;&#10;/* Table */&#10;.table {&#10;    width: 100%;&#10;    border-collapse: collapse;&#10;}&#10;&#10;.table th,&#10;.table td {&#10;    padding: var(--spacing-sm);&#10;    text-align: left;&#10;    border-bottom: 1px solid var(--border-color);&#10;}&#10;&#10;.table th {&#10;    color: var(--text-title);&#10;    font-weight: 600;&#10;    text-transform: uppercase;&#10;    font-size: 0.9em;&#10;}&#10;&#10;.table tbody tr:hover {&#10;    background-color: var(--bg-surface-hover);&#10;}&#10;&#10;/* Utility classes */&#10;.flex {&#10;    display: flex;&#10;}&#10;&#10;.flex-col {&#10;    flex-direction: column;&#10;}&#10;&#10;.items-center {&#10;    align-items: center;&#10;}&#10;&#10;.justify-between {&#10;    justify-content: space-between;&#10;}&#10;&#10;.gap-sm {&#10;    gap: var(--spacing-sm);&#10;}&#10;&#10;.gap-md {&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.text-center {&#10;    text-align: center;&#10;}&#10;&#10;.mt-md {&#10;    margin-top: var(--spacing-md);&#10;}&#10;&#10;.mb-md {&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.w-full {&#10;    width: 100%;&#10;}&#10;&#10;/* Stats cards */&#10;.stats-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: var(--spacing-md);&#10;    margin: var(--spacing-md) 0;&#10;}&#10;&#10;.stat-card {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-lg);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    border: 1px solid var(--border-color);&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;.stat-card:hover {&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.stat-card i {&#10;    font-size: 2.5rem;&#10;    color: var(--color-primary-light);&#10;}&#10;&#10;.stat-content {&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;.stat-value {&#10;    font-size: 2rem;&#10;    font-weight: bold;&#10;    color: var(--text-title);&#10;}&#10;&#10;.stat-label {&#10;    font-size: 0.9rem;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;/* Info box */&#10;.info-box {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-lg);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    border-left: 4px solid var(--color-primary-light);&#10;}&#10;&#10;.info-box i {&#10;    font-size: 1.5rem;&#10;    color: var(--color-primary-light);&#10;    margin-top: 0.2rem;&#10;}&#10;&#10;/* Action cards */&#10;.action-card {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-lg);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;}&#10;&#10;.action-info {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-md);&#10;}&#10;&#10;.action-info i {&#10;    font-size: 1.5rem;&#10;    color: var(--color-warning);&#10;    margin-top: 0.2rem;&#10;}&#10;&#10;/* Form improvements */&#10;.import-form {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.form-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.form-group label {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    margin-bottom: var(--spacing-xs);&#10;    color: var(--text-secondary);&#10;    font-weight: 600;&#10;}&#10;&#10;.form-group input {&#10;    width: 100%;&#10;}&#10;&#10;/* Form inputs dark theme */&#10;input[type=&quot;text&quot;],&#10;input[type=&quot;url&quot;],&#10;input[type=&quot;password&quot;],&#10;input[type=&quot;email&quot;],&#10;select,&#10;textarea {&#10;    background-color: var(--bg-surface-hover);&#10;    border: 1px solid var(--border-color);&#10;    color: var(--text-primary);&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    border-radius: var(--border-radius-sm);&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;input[type=&quot;text&quot;]:focus,&#10;input[type=&quot;url&quot;]:focus,&#10;input[type=&quot;password&quot;]:focus,&#10;input[type=&quot;email&quot;]:focus,&#10;select:focus,&#10;textarea:focus {&#10;    outline: none;&#10;    border-color: var(--color-primary-light);&#10;    background-color: var(--bg-surface);&#10;    box-shadow: 0 0 0 3px rgba(73, 135, 252, 0.1);&#10;}&#10;&#10;input[type=&quot;text&quot;]::placeholder,&#10;input[type=&quot;url&quot;]::placeholder,&#10;input[type=&quot;password&quot;]::placeholder,&#10;input[type=&quot;email&quot;]::placeholder,&#10;textarea::placeholder {&#10;    color: var(--text-muted);&#10;}&#10;&#10;/* Profile &amp; Login Forms */&#10;.profile-info,&#10;.login-form {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;.profile-section {&#10;    background: var(--bg-surface-hover);&#10;    padding: var(--spacing-lg);&#10;    border-radius: var(--border-radius-md);&#10;}&#10;&#10;.profile-section h4 {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    color: var(--text-title);&#10;    margin-bottom: var(--spacing-md);&#10;    font-size: 1.1em;&#10;}&#10;&#10;.info-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.info-item {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-xs);&#10;}&#10;&#10;.info-item label {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    color: var(--text-secondary);&#10;    font-weight: 600;&#10;    font-size: 0.9em;&#10;}&#10;&#10;.info-item span {&#10;    padding: var(--spacing-sm);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-sm);&#10;    border: 1px solid var(--border-color);&#10;}&#10;&#10;.permissions-grid {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.permission-group {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-sm);&#10;}&#10;&#10;.permission-group label {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    font-weight: 600;&#10;}&#10;&#10;.permission-icons {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.permission-icons i {&#10;    font-size: 1.3em;&#10;}&#10;&#10;.permission-icons i.perm {&#10;    color: var(--color-success);&#10;}&#10;&#10;.permission-icons i.noperm {&#10;    color: var(--color-danger);&#10;}&#10;&#10;.profile-actions {&#10;    display: flex;&#10;    gap: var(--spacing-md);&#10;    flex-wrap: wrap;&#10;}&#10;&#10;.form-description {&#10;    text-align: center;&#10;    color: var(--text-secondary);&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.login-links {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-sm);&#10;    padding-top: var(--spacing-md);&#10;    border-top: 1px solid var(--border-color);&#10;}&#10;&#10;.form-error {&#10;    color: var(--color-danger);&#10;    font-size: 0.9em;&#10;    margin-top: var(--spacing-xs);&#10;}&#10;&#10;/* Article components */&#10;.Article {&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    overflow: hidden;&#10;    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);&#10;    margin-bottom: var(--spacing-lg);&#10;}&#10;&#10;.ArticleHeader {&#10;    background: var(--bg-surface-hover);&#10;    padding: var(--spacing-lg);&#10;    border-bottom: 2px solid var(--border-color);&#10;}&#10;&#10;.ArticleHeader h3 {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    color: var(--text-title);&#10;    font-size: 1.5em;&#10;}&#10;&#10;.ArticleContent {&#10;    padding: var(--spacing-lg);&#10;}&#10;&#10;.ArticleFooter {&#10;    background: var(--bg-surface-hover);&#10;    padding: var(--spacing-md) var(--spacing-lg);&#10;    border-top: 1px solid var(--border-color);&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .info-grid {&#10;        grid-template-columns: 1fr;&#10;    }&#10;&#10;    .profile-actions {&#10;        flex-direction: column;&#10;    }&#10;&#10;    .profile-actions .btn {&#10;        width: 100%;&#10;    }&#10;}&#10;&#10;/* Users table */&#10;.users-table-container {&#10;    overflow-x: auto;&#10;    max-width: 100%;&#10;}&#10;&#10;.users-table {&#10;    width: 100%;&#10;    border-collapse: collapse;&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-md);&#10;    table-layout: fixed;&#10;}&#10;&#10;.users-table thead {&#10;    background: var(--bg-surface);&#10;    position: sticky;&#10;    top: 0;&#10;    z-index: 1;&#10;}&#10;&#10;.users-table th {&#10;    padding: var(--spacing-sm) var(--spacing-xs);&#10;    text-align: left;&#10;    color: var(--text-title);&#10;    font-weight: 600;&#10;    border-bottom: 2px solid var(--border-color);&#10;    font-size: 0.85em;&#10;}&#10;&#10;.users-table th:first-child {&#10;    width: 15%;&#10;}&#10;&#10;.users-table th:nth-child(2) {&#10;    width: 15%;&#10;}&#10;&#10;.users-table th:not(:first-child):not(:nth-child(2)):not(:last-child) {&#10;    width: 10%;&#10;}&#10;&#10;.users-table th:last-child {&#10;    width: 8%;&#10;}&#10;&#10;.users-table th i {&#10;    margin-right: var(--spacing-xs);&#10;}&#10;&#10;.users-table td {&#10;    padding: var(--spacing-sm) var(--spacing-xs);&#10;    border-bottom: 1px solid var(--border-color);&#10;}&#10;&#10;.users-table tbody tr {&#10;    transition: background-color var(--transition-fast);&#10;}&#10;&#10;.users-table tbody tr:hover {&#10;    background: var(--bg-surface);&#10;}&#10;&#10;.user-name {&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;    white-space: nowrap;&#10;}&#10;&#10;.perm-cell {&#10;    padding: var(--spacing-xs) !important;&#10;}&#10;&#10;.btn-perm {&#10;    padding: var(--spacing-xs);&#10;    border-radius: var(--border-radius-sm);&#10;    background-color: var(--bg-surface);&#10;    color: var(--text-muted);&#10;    transition: all var(--transition-fast);&#10;    border: 1px solid var(--border-color);&#10;}&#10;&#10;.btn-perm:hover {&#10;    background-color: var(--bg-button-hover);&#10;    transform: scale(1.1);&#10;}&#10;&#10;.btn-perm.active {&#10;    background-color: var(--color-success-bg-hover);&#10;    color: var(--color-success);&#10;    border-color: var(--color-success);&#10;}&#10;&#10;.btn-perm.active:hover {&#10;    background-color: var(--color-success-bg-strong);&#10;}&#10;&#10;/* Maintenance page */&#10;.maintenance-container {&#10;    display: flex;&#10;    flex-direction: column;&#10;    align-items: center;&#10;    gap: var(--spacing-xl);&#10;    padding: var(--spacing-xl) 0;&#10;}&#10;&#10;.maintenance-icon {&#10;    display: flex;&#10;    justify-content: center;&#10;    align-items: center;&#10;}&#10;&#10;.loader {&#10;    width: 80px;&#10;    height: 80px;&#10;    border: 8px solid var(--border-color);&#10;    border-top-color: var(--color-primary-light);&#10;    border-radius: 50%;&#10;    animation: spin 1s linear infinite;&#10;}&#10;&#10;@keyframes spin {&#10;    to {&#10;        transform: rotate(360deg);&#10;    }&#10;}&#10;&#10;.maintenance-message {&#10;    text-align: center;&#10;    max-width: 600px;&#10;}&#10;&#10;.maintenance-message h4 {&#10;    color: var(--text-title);&#10;    font-size: 1.5em;&#10;    margin-bottom: var(--spacing-md);&#10;}&#10;&#10;.maintenance-message p {&#10;    color: var(--text-secondary);&#10;    margin-bottom: var(--spacing-md);&#10;    line-height: 1.6;&#10;}&#10;&#10;.maintenance-warning {&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: var(--spacing-sm);&#10;    padding: var(--spacing-md);&#10;    background: var(--color-warning-bg);&#10;    border: 1px solid var(--color-warning);&#10;    border-radius: var(--border-radius-md);&#10;    color: var(--color-warning);&#10;    font-weight: 600;&#10;}&#10;&#10;.maintenance-warning i {&#10;    font-size: 1.2em;&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .maintenance-container {&#10;        padding: var(--spacing-lg) var(--spacing-md);&#10;    }&#10;&#10;    .loader {&#10;        width: 60px;&#10;        height: 60px;&#10;        border-width: 6px;&#10;    }&#10;&#10;    .maintenance-message h4 {&#10;        font-size: 1.2em;&#10;    }&#10;}&#10;&#10;/* Package filter form */&#10;.package-filter-form {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.filter-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.filter-actions {&#10;    display: flex;&#10;    justify-content: flex-end;&#10;}&#10;&#10;/* Packages grid */&#10;.packages-grid {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));&#10;    gap: var(--spacing-lg);&#10;}&#10;&#10;/* Package card */&#10;.package-card {&#10;    background: var(--bg-surface);&#10;    border-radius: var(--border-radius-lg);&#10;    overflow: hidden;&#10;    box-shadow: var(--shadow-sm);&#10;    transition: all var(--transition-fast);&#10;}&#10;&#10;.package-card:hover {&#10;    box-shadow: var(--shadow-lg);&#10;    transform: translateY(-2px);&#10;}&#10;&#10;.package-card-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-surface-hover);&#10;    border-bottom: 2px solid var(--border-color);&#10;}&#10;&#10;.package-name {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-sm);&#10;    font-weight: 600;&#10;    font-size: 1.1em;&#10;    color: var(--text-title);&#10;}&#10;&#10;.package-card-content {&#10;    padding: 0;&#10;}&#10;&#10;.package-card-content.open {&#10;    padding: var(--spacing-md);&#10;}&#10;&#10;/* Package version box */&#10;.package-version-box {&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-md);&#10;    margin-bottom: var(--spacing-sm);&#10;    overflow: hidden;&#10;}&#10;&#10;.package-version-box:last-child {&#10;    margin-bottom: 0;&#10;}&#10;&#10;.package-version-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    background: var(--bg-surface);&#10;}&#10;&#10;.version-badge {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    font-weight: 600;&#10;    color: var(--color-primary-light);&#10;}&#10;&#10;.version-date {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    color: var(--text-secondary);&#10;    font-size: 0.9em;&#10;}&#10;&#10;/* Package flavors */&#10;.package-flavors {&#10;    padding: 0;&#10;}&#10;&#10;.package-flavors.open {&#10;    padding: var(--spacing-sm);&#10;}&#10;&#10;.flavor-item {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;    padding: var(--spacing-sm);&#10;    background: var(--bg-body);&#10;    border-radius: var(--border-radius-sm);&#10;    margin-bottom: var(--spacing-xs);&#10;}&#10;&#10;.flavor-item:last-child {&#10;    margin-bottom: 0;&#10;}&#10;&#10;.flavor-badge {&#10;    display: inline-flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    padding: 0.25em 0.5em;&#10;    background: var(--bg-surface);&#10;    border: 1px solid var(--border-color);&#10;    border-radius: var(--border-radius-sm);&#10;    font-size: 0.85em;&#10;    color: var(--text-primary);&#10;}&#10;&#10;/* Empty state */&#10;.empty-state {&#10;    display: flex;&#10;    flex-direction: column;&#10;    align-items: center;&#10;    gap: var(--spacing-md);&#10;    padding: var(--spacing-xl);&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.empty-state i {&#10;    font-size: 4em;&#10;    color: var(--text-muted);&#10;}&#10;&#10;/* Responsive */&#10;@media (max-width: 1024px) {&#10;    .packages-grid {&#10;        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));&#10;    }&#10;&#10;    .filter-grid {&#10;        grid-template-columns: 1fr;&#10;    }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .packages-grid {&#10;        grid-template-columns: 1fr;&#10;    }&#10;}&#10;&#10;/* Package detail */&#10;.detail-header {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.package-detail-grid {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-md);&#10;}&#10;&#10;.flavor-detail-item {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-sm);&#10;    padding: var(--spacing-md);&#10;    background: var(--bg-body);&#10;    border-radius: var(--border-radius-sm);&#10;    margin-bottom: var(--spacing-sm);&#10;}&#10;&#10;.flavor-detail-item:last-child {&#10;    margin-bottom: 0;&#10;}&#10;&#10;.flavor-info-section {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    gap: var(--spacing-md);&#10;    flex-wrap: wrap;&#10;}&#10;&#10;.flavor-badges {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;    flex: 1;&#10;}&#10;&#10;.flavor-size-badge {&#10;    margin-left: auto;&#10;}&#10;&#10;.flavor-dependencies {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--spacing-xs);&#10;    padding: var(--spacing-sm);&#10;    background: var(--bg-surface-hover);&#10;    border-radius: var(--border-radius-sm);&#10;    border-left: 3px solid var(--color-primary-light);&#10;}&#10;&#10;.dependencies-title {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;    font-size: 0.9em;&#10;    font-weight: 600;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.dependencies-list-inline {&#10;    display: flex;&#10;    flex-wrap: wrap;&#10;    gap: var(--spacing-xs);&#10;}&#10;&#10;.dep-badge {&#10;    background: var(--bg-surface);&#10;    border-color: var(--color-primary-light);&#10;    display: inline-flex;&#10;    align-items: center;&#10;    gap: var(--spacing-xs);&#10;}&#10;&#10;.dep-name {&#10;    font-weight: 600;&#10;}&#10;&#10;.flavor-actions {&#10;    display: flex;&#10;    justify-content: flex-end;&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .detail-header {&#10;        flex-direction: column;&#10;        align-items: stretch;&#10;    }&#10;&#10;    .detail-header .btn {&#10;        width: 100%;&#10;        justify-content: center;&#10;    }&#10;&#10;    .flavor-detail-item {&#10;        flex-direction: column;&#10;        align-items: stretch;&#10;    }&#10;&#10;    .flavor-detail-item form {&#10;        width: 100%;&#10;    }&#10;&#10;    .flavor-detail-item button {&#10;        width: 100%;&#10;    }&#10;&#10;    .flavor-info-section {&#10;        flex-direction: column;&#10;        align-items: stretch;&#10;    }&#10;&#10;    .flavor-size-badge {&#10;        margin-left: 0;&#10;    }&#10;&#10;    .flavor-actions {&#10;        width: 100%;&#10;    }&#10;&#10;    .flavor-actions button {&#10;        width: 100%;&#10;    }&#10;}&#10;&#10;/* Messages */&#10;.message-success {&#10;    border-color: var(--color-success);&#10;    background: var(--color-success-bg);&#10;    color: var(--color-success);&#10;}&#10;&#10;.message-error {&#10;    border-color: var(--color-danger);&#10;    background: var(--color-danger-bg);&#10;    color: var(--color-danger);&#10;}&#10;&#10;.message-warning {&#10;    border-color: var(--color-warning);&#10;    background: var(--color-warning-bg);&#10;    color: var(--color-warning);&#10;}&#10;&#10;.message-info {&#10;    border-color: var(--color-primary-light);&#10;    background: var(--color-primary-bg);&#10;    color: var(--color-primary-light);&#10;}&#10;&#10;/* Language selector */&#10;.language-selector {&#10;    display: flex;&#10;    align-items: center;&#10;}&#10;&#10;.language-select {&#10;    width: auto;&#10;    min-width: 80px;&#10;    padding: var(--spacing-sm) var(--spacing-md);&#10;    font-size: 0.9em;&#10;    cursor: pointer;&#10;    appearance: none;&#10;    background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%234987fc' d='M6 9L1 4h10z'/%3E%3C/svg%3E&quot;);&#10;    background-repeat: no-repeat;&#10;    background-position: right var(--spacing-sm) center;&#10;    padding-right: calc(var(--spacing-md) + 16px);&#10;}&#10;&#10;.language-select:hover {&#10;    border-color: var(--color-primary-light);&#10;    background-color: var(--bg-surface);&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/server/data/templates/package_detail.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/server/data/templates/package_detail.html" />
              <option name="originalContent" value="{% extends 'base.html' %}&#10;{% load i18n %}&#10;{% load static %}&#10;{% load markdown_extras %}&#10;&#10;{% block extra_head %}&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'css/folding_box.css' %}&quot;/&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'css/markdown.css' %}&quot;/&gt;&#10;{% endblock %}&#10;&#10;{% block content %}&#10;    &lt;div class=&quot;Article&quot;&gt;&#10;        &lt;div class=&quot;ArticleHeader&quot;&gt;&#10;            &lt;div class=&quot;detail-header&quot;&gt;&#10;                &lt;h3&gt;&lt;i class=&quot;fa-solid fa-box&quot;&gt;&lt;/i&gt; {{ package.name }}&lt;/h3&gt;&#10;                &lt;a href=&quot;{% url 'package' %}&quot; class=&quot;btn btn-icon&quot;&gt;&#10;                    &lt;i class=&quot;fa-solid fa-arrow-left&quot;&gt;&lt;/i&gt;&#10;                    {% trans 'Back' %}&#10;                &lt;/a&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;ArticleContent&quot;&gt;&#10;            {% if package.description %}&#10;                &lt;div class=&quot;markdown-content&quot;&gt;&#10;                    {{ package.description|markdown }}&#10;                &lt;/div&gt;&#10;            {% else %}&#10;                &lt;p class=&quot;text-muted&quot;&gt;&#10;                    &lt;i class=&quot;fa-solid fa-circle-info&quot;&gt;&lt;/i&gt;&#10;                    {% trans 'No description available for this package.' %}&#10;                &lt;/p&gt;&#10;            {% endif %}&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;ArticleContent&quot;&gt;&#10;            &lt;div class=&quot;package-detail-grid&quot;&gt;&#10;                {% for version, version_data in package.versions.items %}&#10;                    &lt;div class=&quot;package-version-box folding_box&quot; id=&quot;{{ version }}&quot;&gt;&#10;                        &lt;div class=&quot;package-version-header folding_box_header&quot;&#10;                             onclick=&quot;toggleContent('{{ version }}')&quot;&gt;&#10;                            &lt;div class=&quot;version-badge&quot;&gt;&#10;                                &lt;i class=&quot;fa-solid fa-tag&quot;&gt;&lt;/i&gt;&#10;                                {{ version }}&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;version-date&quot;&gt;&#10;                                &lt;i class=&quot;fa-solid fa-calendar&quot;&gt;&lt;/i&gt;&#10;                                {% with latest=version_data.flavors|dictsortreversed:&quot;build_date&quot;|first %}&#10;                                    {{ latest.build_date|date:&quot;d/m/Y&quot; }}&#10;                                {% endwith %}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;package-flavors folding_box_content&quot;&gt;&#10;                            &lt;h4&gt;&lt;i class=&quot;fa-solid fa-boxes-stacked&quot;&gt;&lt;/i&gt; {% trans 'Available Flavors' %}&lt;/h4&gt;&#10;                            {% for flavor in version_data.flavors %}&#10;                                &lt;div class=&quot;flavor-detail-item&quot;&gt;&#10;                                    &lt;div class=&quot;flavor-info-section&quot;&gt;&#10;                                        &lt;div class=&quot;flavor-badges&quot;&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-brands fa-{% if flavor.os == 'Linux' %}linux{% elif flavor.os == 'Windows' %}windows{% else %}diaspora{% endif %}&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.os }}&#10;                                            &lt;/span&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-microchip&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.arch }}&#10;                                            &lt;/span&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-cube&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.kind }}&#10;                                            &lt;/span&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-code&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.abi }}&#10;                                            &lt;/span&gt;&#10;                                            {% if flavor.glibc %}&#10;                                                &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                    &lt;i class=&quot;fa-solid fa-book&quot;&gt;&lt;/i&gt;&#10;                                                    glibc {{ flavor.glibc }}&#10;                                                &lt;/span&gt;&#10;                                            {% endif %}&#10;                                        &lt;/div&gt;&#10;                                        &lt;span class=&quot;flavor-badge flavor-size-badge&quot;&gt;&#10;                                            &lt;i class=&quot;fa-solid fa-file-zipper&quot;&gt;&lt;/i&gt;&#10;                                            {{ flavor.package_size }}&#10;                                        &lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;&#10;                                    {% if flavor.dependencies and flavor.dependencies|length &gt; 0 %}&#10;                                        &lt;div class=&quot;flavor-dependencies&quot;&gt;&#10;                                            &lt;span class=&quot;dependencies-title&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-link&quot;&gt;&lt;/i&gt;&#10;                                                {% trans 'Dependencies' %} ({{ flavor.dependencies|length }}):&#10;                                            &lt;/span&gt;&#10;                                            &lt;div class=&quot;dependencies-list-inline&quot;&gt;&#10;                                                {% for dep in flavor.dependencies %}&#10;                                                    &lt;span class=&quot;flavor-badge dep-badge&quot;&gt;&#10;                                                        &lt;span class=&quot;dep-name&quot;&gt;&#10;                                                            {% if dep.name %}{{ dep.name }}{% else %}unknown{% endif %}/{% if dep.version %}{{ dep.version }}{% else %}*{% endif %}&#10;                                                        &lt;/span&gt;&#10;                                                        {% if dep.os %}&#10;                                                            &lt;i class=&quot;fa-brands fa-{% if dep.os == 'Linux' %}linux{% elif dep.os == 'Windows' %}windows{% else %}diaspora{% endif %}&quot; title=&quot;{{ dep.os }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                        {% if dep.arch %}&#10;                                                            &lt;i class=&quot;fa-solid fa-microchip&quot; title=&quot;{{ dep.arch }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                        {% if dep.kind %}&#10;                                                            &lt;i class=&quot;fa-solid fa-cube&quot; title=&quot;{{ dep.kind }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                        {% if dep.abi %}&#10;                                                            &lt;i class=&quot;fa-solid fa-code&quot; title=&quot;{{ dep.abi }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                    &lt;/span&gt;&#10;                                                {% endfor %}&#10;                                            &lt;/div&gt;&#10;                                        &lt;/div&gt;&#10;                                    {% endif %}&#10;&#10;                                    {% if perms.pack.delete_packageentry %}&#10;                                        &lt;form method=&quot;post&quot; action=&quot;{% url 'delete_package' flavor.pk %}&quot;&#10;                                              class=&quot;flavor-actions&quot;&gt;&#10;                                            {% csrf_token %}&#10;                                            &lt;button type=&quot;submit&quot; class=&quot;btn-icon btn-danger&quot;&#10;                                                    title=&quot;{% trans 'Delete this flavor' %}&quot;&#10;                                                    onclick=&quot;return confirm('{% trans 'Are you sure you want to delete this flavor?' %}')&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-trash&quot;&gt;&lt;/i&gt;&#10;                                            &lt;/button&gt;&#10;                                        &lt;/form&gt;&#10;                                    {% endif %}&#10;                                &lt;/div&gt;&#10;                            {% endfor %}&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                {% endfor %}&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;{% endblock %}&#10;&#10;{% block script_content %}&#10;    &lt;script src=&quot;{% static 'js/folding_box.js' %}&quot;&gt;&lt;/script&gt;&#10;{% endblock %}&#10;" />
              <option name="updatedContent" value="{% extends 'base.html' %}&#10;{% load i18n %}&#10;{% load static %}&#10;{% load markdown_extras %}&#10;&#10;{% block extra_head %}&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'css/folding_box.css' %}&quot;/&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;{% static 'css/markdown.css' %}&quot;/&gt;&#10;{% endblock %}&#10;&#10;{% block content %}&#10;    &lt;div class=&quot;Article&quot;&gt;&#10;        &lt;div class=&quot;ArticleHeader&quot;&gt;&#10;            &lt;div class=&quot;detail-header&quot;&gt;&#10;                &lt;h3&gt;&lt;i class=&quot;fa-solid fa-box&quot;&gt;&lt;/i&gt; {{ package.name }}&lt;/h3&gt;&#10;                &lt;a href=&quot;{% url 'package' %}&quot; class=&quot;btn btn-icon&quot;&gt;&#10;                    &lt;i class=&quot;fa-solid fa-arrow-left&quot;&gt;&lt;/i&gt;&#10;                    {% trans 'Back' %}&#10;                &lt;/a&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;ArticleContent&quot;&gt;&#10;            {% if package.description %}&#10;                &lt;div class=&quot;markdown-content&quot;&gt;&#10;                    {{ package.description|markdown }}&#10;                &lt;/div&gt;&#10;            {% else %}&#10;                &lt;p class=&quot;text-muted&quot;&gt;&#10;                    &lt;i class=&quot;fa-solid fa-circle-info&quot;&gt;&lt;/i&gt;&#10;                    {% trans 'No description available for this package.' %}&#10;                &lt;/p&gt;&#10;            {% endif %}&#10;        &lt;/div&gt;&#10;        &lt;div class=&quot;ArticleContent&quot;&gt;&#10;            &lt;div class=&quot;package-detail-grid&quot;&gt;&#10;                {% for version, version_data in package.versions.items %}&#10;                    &lt;div class=&quot;package-version-box folding_box&quot; id=&quot;{{ version }}&quot;&gt;&#10;                        &lt;div class=&quot;package-version-header folding_box_header&quot;&#10;                             onclick=&quot;toggleContent('{{ version }}')&quot;&gt;&#10;                            &lt;div class=&quot;version-badge&quot;&gt;&#10;                                &lt;i class=&quot;fa-solid fa-tag&quot;&gt;&lt;/i&gt;&#10;                                {{ version }}&#10;                            &lt;/div&gt;&#10;                            &lt;div class=&quot;version-date&quot;&gt;&#10;                                &lt;i class=&quot;fa-solid fa-calendar&quot;&gt;&lt;/i&gt;&#10;                                {% with latest=version_data.flavors|dictsortreversed:&quot;build_date&quot;|first %}&#10;                                    {{ latest.build_date|date:&quot;d/m/Y&quot; }}&#10;                                {% endwith %}&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;package-flavors folding_box_content&quot;&gt;&#10;                            &lt;h4&gt;&lt;i class=&quot;fa-solid fa-boxes-stacked&quot;&gt;&lt;/i&gt; {% trans 'Available Flavors' %}&lt;/h4&gt;&#10;                            {% for flavor in version_data.flavors %}&#10;                                &lt;div class=&quot;flavor-detail-item&quot;&gt;&#10;                                    &lt;div class=&quot;flavor-info-section&quot;&gt;&#10;                                        &lt;div class=&quot;flavor-badges&quot;&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-brands fa-{% if flavor.os == 'Linux' %}linux{% elif flavor.os == 'Windows' %}windows{% else %}diaspora{% endif %}&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.os }}&#10;                                            &lt;/span&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-microchip&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.arch }}&#10;                                            &lt;/span&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-cube&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.kind }}&#10;                                            &lt;/span&gt;&#10;                                            &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-code&quot;&gt;&lt;/i&gt;&#10;                                                {{ flavor.abi }}&#10;                                            &lt;/span&gt;&#10;                                            {% if flavor.glibc %}&#10;                                                &lt;span class=&quot;flavor-badge&quot;&gt;&#10;                                                    &lt;i class=&quot;fa-solid fa-book&quot;&gt;&lt;/i&gt;&#10;                                                    glibc {{ flavor.glibc }}&#10;                                                &lt;/span&gt;&#10;                                            {% endif %}&#10;                                        &lt;/div&gt;&#10;                                        &lt;span class=&quot;flavor-badge flavor-size-badge&quot;&gt;&#10;                                            &lt;i class=&quot;fa-solid fa-file-zipper&quot;&gt;&lt;/i&gt;&#10;                                            {{ flavor.package_size }}&#10;                                        &lt;/span&gt;&#10;                                    &lt;/div&gt;&#10;&#10;                                    {% if flavor.dependencies and flavor.dependencies|length &gt; 0 %}&#10;                                        &lt;div class=&quot;flavor-dependencies&quot;&gt;&#10;                                            &lt;span class=&quot;dependencies-title&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-link&quot;&gt;&lt;/i&gt;&#10;                                                {% trans 'Dependencies' %} ({{ flavor.dependencies|length }}):&#10;                                            &lt;/span&gt;&#10;                                            &lt;div class=&quot;dependencies-list-inline&quot;&gt;&#10;                                                {% for dep in flavor.dependencies %}&#10;                                                    &lt;span class=&quot;flavor-badge dep-badge&quot;&gt;&#10;                                                        &lt;span class=&quot;dep-name&quot;&gt;&#10;                                                            {% if dep.name %}{{ dep.name }}{% else %}unknown{% endif %}/{% if dep.version %}{{ dep.version }}{% else %}*{% endif %}&#10;                                                        &lt;/span&gt;&#10;                                                        {% if dep.os %}&#10;                                                            &lt;i class=&quot;fa-brands fa-{% if dep.os == 'Linux' %}linux{% elif dep.os == 'Windows' %}windows{% else %}diaspora{% endif %}&quot; title=&quot;{{ dep.os }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                        {% if dep.arch %}&#10;                                                            &lt;i class=&quot;fa-solid fa-microchip&quot; title=&quot;{{ dep.arch }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                        {% if dep.kind %}&#10;                                                            &lt;i class=&quot;fa-solid fa-cube&quot; title=&quot;{{ dep.kind }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                        {% if dep.abi %}&#10;                                                            &lt;i class=&quot;fa-solid fa-code&quot; title=&quot;{{ dep.abi }}&quot;&gt;&lt;/i&gt;&#10;                                                        {% endif %}&#10;                                                    &lt;/span&gt;&#10;                                                {% endfor %}&#10;                                            &lt;/div&gt;&#10;                                        &lt;/div&gt;&#10;                                    {% endif %}&#10;&#10;                                    {% if perms.pack.delete_packageentry %}&#10;                                        &lt;form method=&quot;post&quot; action=&quot;{% url 'delete_package' flavor.pk %}&quot;&#10;                                              class=&quot;flavor-actions&quot;&gt;&#10;                                            {% csrf_token %}&#10;                                            &lt;button type=&quot;submit&quot; class=&quot;btn-icon btn-danger&quot;&#10;                                                    title=&quot;{% trans 'Delete this flavor' %}&quot;&#10;                                                    onclick=&quot;return confirm('{% trans 'Are you sure you want to delete this flavor?' %}')&quot;&gt;&#10;                                                &lt;i class=&quot;fa-solid fa-trash&quot;&gt;&lt;/i&gt;&#10;                                            &lt;/button&gt;&#10;                                        &lt;/form&gt;&#10;                                    {% endif %}&#10;                                &lt;/div&gt;&#10;                            {% endfor %}&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                {% endfor %}&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;{% endblock %}&#10;&#10;{% block script_content %}&#10;    &lt;script src=&quot;{% static 'js/folding_box.js' %}&quot;&gt;&lt;/script&gt;&#10;{% endblock %}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/server/scripts/pack/models.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/server/scripts/pack/models.py" />
              <option name="originalContent" value="&quot;&quot;&quot;&#10;Package models.&#10;&quot;&quot;&quot;&#10;&#10;from datetime import datetime&#10;from pathlib import Path&#10;&#10;from django.db import models&#10;from django.utils import timezone&#10;&#10;from pack.logger import logger&#10;from scripts.settings import MEDIA_ROOT&#10;&#10;old_date = datetime.fromisoformat(&quot;2000-01-01T00:00:00+0000&quot;)&#10;&#10;&#10;# Create your models here.&#10;class PackageEntry(models.Model):&#10;    &quot;&quot;&quot;&#10;    Package in the list.&#10;    &quot;&quot;&quot;&#10;&#10;    OsType = ((&quot;l&quot;, &quot;Linux&quot;), (&quot;w&quot;, &quot;Windows&quot;), (&quot;a&quot;, &quot;any&quot;))&#10;    ArchType = ((&quot;x&quot;, &quot;x86_64&quot;), (&quot;a&quot;, &quot;aarch64&quot;), (&quot;y&quot;, &quot;any&quot;))&#10;    KindType = ((&quot;r&quot;, &quot;shared&quot;), (&quot;t&quot;, &quot;static&quot;), (&quot;h&quot;, &quot;header&quot;), (&quot;a&quot;, &quot;any&quot;))&#10;    AbiType = ((&quot;g&quot;, &quot;gnu-like&quot;), (&quot;l&quot;, &quot;llvm&quot;), (&quot;m&quot;, &quot;msvc-like&quot;), (&quot;a&quot;, &quot;any&quot;))&#10;&#10;    name = models.CharField(max_length=60, verbose_name=&quot;Package's Name.&quot;)&#10;    version = models.CharField(max_length=25, verbose_name=&quot;Package's Version.&quot;)&#10;    os = models.CharField(&#10;        max_length=1, choices=OsType, verbose_name=&quot;Package's Operating System.&quot;&#10;    )&#10;    glibc = models.CharField(&#10;        max_length=25, default=&quot;&quot;, verbose_name=&quot;Package's glibc Version if applicable.&quot;&#10;    )&#10;    arch = models.CharField(&#10;        max_length=1, choices=ArchType, verbose_name=&quot;Package's CPU Architecture.&quot;&#10;    )&#10;    kind = models.CharField(&#10;        max_length=1, choices=KindType, verbose_name=&quot;Package's kind.&quot;&#10;    )&#10;    abi = models.CharField(&#10;        max_length=1, choices=AbiType, verbose_name=&quot;Package's abi type.&quot;, default=&quot;g&quot;&#10;    )&#10;    build_date = models.DateTimeField(&#10;        default=old_date,&#10;        verbose_name=&quot;Date of Build&quot;,&#10;    )&#10;    date = models.DateTimeField(default=timezone.now, verbose_name=&quot;Date of Upload&quot;)&#10;    package = models.FileField(upload_to=&quot;packages&quot;, verbose_name=&quot;Package file&quot;)&#10;&#10;    dependencies = models.TextField(&#10;        default=&quot;&quot;, verbose_name=&quot;Package dependencies&quot;, blank=True&#10;    )&#10;    description = models.TextField(&#10;        default=&quot;&quot;, verbose_name=&quot;Package description&quot;, blank=True&#10;    )&#10;&#10;    class Meta:&#10;        &quot;&quot;&quot;&#10;        Metadata for the packages&#10;        &quot;&quot;&quot;&#10;&#10;        verbose_name = &quot;C++ Package repository item&quot;&#10;&#10;    def check_file(self):&#10;        &quot;&quot;&quot;&#10;        Check if the file is relative to MEDIA_ROOT, and correct if not.&#10;        &quot;&quot;&quot;&#10;        file_path = str(self.package)&#10;&#10;        # Si le chemin commence par /data/ au lieu de /app/data/&#10;        if file_path.startswith(&quot;/data/&quot;):&#10;            # Convertir en chemin relatif&#10;            relative_path = file_path.replace(&quot;/data/&quot;, &quot;&quot;)&#10;            self.package = relative_path&#10;            self.save(update_fields=[&quot;package&quot;])&#10;            logger.info(f&quot;Corrected path from {file_path} to {relative_path}&quot;)&#10;&#10;        # Si le chemin est absolu et commence par MEDIA_ROOT&#10;        elif file_path.startswith(str(MEDIA_ROOT)):&#10;            relative_path = file_path.replace(str(MEDIA_ROOT) + &quot;/&quot;, &quot;&quot;)&#10;            self.package = relative_path&#10;            self.save(update_fields=[&quot;package&quot;])&#10;            logger.info(f&quot;Corrected absolute path to relative: {relative_path}&quot;)&#10;&#10;    def save(self, *args, **kwargs):&#10;        &quot;&quot;&quot;&#10;        Overload of the save procedure to check the date&#10;        :param args:&#10;        :param kwargs:&#10;        &quot;&quot;&quot;&#10;        self.date = timezone.now()&#10;        super(PackageEntry, self).save(*args, **kwargs)&#10;&#10;    def delete(self, keep_file: bool = False, *args, **kwargs):&#10;        &quot;&quot;&quot;&#10;&#10;        :param keep_file:&#10;        :param args:&#10;        :param kwargs:&#10;        &quot;&quot;&quot;&#10;        if Path(self.package.path).exists() and not keep_file:&#10;            self.package.delete()&#10;        super(PackageEntry, self).delete(*args, **kwargs)&#10;&#10;    def match(self, match_to):&#10;        &quot;&quot;&quot;&#10;&#10;        :param match_to:&#10;        :return:&#10;        &quot;&quot;&quot;&#10;        from fnmatch import translate&#10;        from re import compile&#10;&#10;        for attr in [&quot;name&quot;, &quot;version&quot;, &quot;os&quot;, &quot;arch&quot;, &quot;kind&quot;, &quot;abi&quot;, &quot;glibc&quot;]:&#10;            object_attr = getattr(self, attr)&#10;            if attr in [&quot;os&quot;, &quot;arch&quot;, &quot;kind&quot;, &quot;abi&quot;]:&#10;                if match_to[attr] == &quot;any&quot; or object_attr == &quot;any&quot;:&#10;                    # if any, skip the check&#10;                    continue&#10;                if len(match_to[attr]) == 1:&#10;                    if match_to[attr] == &quot;*&quot;:&#10;                        # if match_to[attr] is &quot;*&quot;, skip the check&#10;                        continue&#10;                    if match_to[attr] != object_attr:&#10;                        return False&#10;                    continue&#10;            if not compile(translate(match_to[attr])).match(object_attr):&#10;                return False&#10;        return True&#10;&#10;    def to_dep_entry(self):&#10;        &quot;&quot;&quot;&#10;&#10;        :return:&#10;        &quot;&quot;&quot;&#10;        if self.glibc == &quot;&quot;:&#10;            return f&quot;{self.name}/{self.version} ({self.build_date.isoformat()}) [{self.get_arch_display()}, {self.get_kind_display()}, {self.get_os_display()}, {self.get_abi_display()}]&quot;&#10;        return f&quot;{self.name}/{self.version} ({self.build_date.isoformat()}) [{self.get_arch_display()}, {self.get_kind_display()}, {self.get_os_display()}, {self.get_abi_display()}, {self.glibc}]&quot;&#10;&#10;    def get_pretty_size_display(self):&#10;        &quot;&quot;&quot;&#10;&#10;        :return:&#10;        &quot;&quot;&quot;&#10;        if not Path(self.package.path).exists():&#10;            return f&quot;(void)&quot;&#10;        raw_size = Path(self.package.path).stat().st_size&#10;        for unite in [&quot;&quot;, &quot;K&quot;, &quot;M&quot;, &quot;G&quot;, &quot;T&quot;]:&#10;            if raw_size &lt; 1024.0:&#10;                break&#10;            raw_size /= 1024.0&#10;        return f&quot;{raw_size:.2f} {unite}&quot;&#10;&#10;&#10;def convert_filter(get_filter: dict):&#10;    &quot;&quot;&quot;&#10;    Convert the filter to a proper format.&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = {&#10;        &quot;name&quot;: &quot;*&quot;,&#10;        &quot;version&quot;: &quot;*&quot;,&#10;        &quot;os&quot;: &quot;*&quot;,&#10;        &quot;arch&quot;: &quot;*&quot;,&#10;        &quot;kind&quot;: &quot;*&quot;,&#10;        &quot;abi&quot;: &quot;*&quot;,&#10;        &quot;glibc&quot;: &quot;*&quot;,&#10;    }&#10;    if &quot;compiler&quot; in get_filter:&#10;        get_filter[&quot;abi&quot;] = get_filter[&quot;compiler&quot;]&#10;    for key in [&quot;name&quot;, &quot;version&quot;, &quot;glibc&quot;]:&#10;        if key in get_filter:&#10;            if get_filter[key] not in [None, &quot;&quot;]:&#10;                true_filter[key] = get_filter[key]&#10;    for key in [&quot;glibc&quot;, &quot;os&quot;, &quot;arch&quot;, &quot;abi&quot;]:&#10;        if key in get_filter and get_filter[key] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;            true_filter[key] = get_filter[key][0].lower()&#10;    if &quot;kind&quot; in get_filter and get_filter[&quot;kind&quot;] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;        if get_filter[&quot;kind&quot;] == &quot;shared&quot;:&#10;            true_filter[&quot;kind&quot;] = &quot;r&quot;&#10;        elif get_filter[&quot;kind&quot;] == &quot;static&quot;:&#10;            true_filter[&quot;kind&quot;] = &quot;t&quot;&#10;        elif get_filter[&quot;kind&quot;] == &quot;header&quot;:&#10;            true_filter[&quot;kind&quot;] = &quot;h&quot;&#10;    return true_filter&#10;&#10;&#10;def safe_create(data: dict, file: Path):&#10;    &quot;&quot;&quot;&#10;&#10;    :param data:&#10;    :param file:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    is_ok = True&#10;    for key in [&#10;        &quot;name&quot;,&#10;        &quot;version&quot;,&#10;        &quot;os&quot;,&#10;        &quot;arch&quot;,&#10;        &quot;kind&quot;,&#10;        &quot;abi&quot;,&#10;        &quot;glibc&quot;,&#10;        &quot;build_date&quot;,&#10;    ]:&#10;        if key not in data.keys():&#10;            is_ok = False&#10;            logger.warning(f&quot;Cannot create entry: missing key {key}&quot;)&#10;    if not file.exists():&#10;        logger.warning(f&quot;Cannot create entry: file does not exists.&quot;)&#10;        is_ok = False&#10;    key_ok = False&#10;    loc_os = data[&quot;os&quot;]&#10;    for key, val in PackageEntry.OsType:&#10;        if loc_os == key:&#10;            key_ok = True&#10;            break&#10;        if loc_os == val:&#10;            loc_os = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(f&quot;Cannot create entry: bad OS key.&quot;)&#10;        is_ok = False&#10;    #&#10;    key_ok = False&#10;    loc_arch = data[&quot;arch&quot;]&#10;    for key, val in PackageEntry.ArchType:&#10;        if loc_arch == key:&#10;            key_ok = True&#10;            break&#10;        if loc_arch.lower() == val:&#10;            loc_arch = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(&#10;            f&quot;Cannot create entry: bad ARCH key: {loc_arch} vs. {PackageEntry.ArchType}.&quot;&#10;        )&#10;        is_ok = False&#10;    #&#10;    key_ok = False&#10;    loc_kind = data[&quot;kind&quot;]&#10;    for key, val in PackageEntry.KindType:&#10;        if loc_kind == key:&#10;            key_ok = True&#10;            break&#10;        if loc_kind.lower() == val:&#10;            loc_kind = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(&#10;            f&quot;Cannot create entry: bad KIND key {loc_kind} vs. {PackageEntry.KindType}.&quot;&#10;        )&#10;        is_ok = False&#10;    #&#10;    key_ok = False&#10;    loc_abi = data[&quot;abi&quot;]&#10;    for key, val in PackageEntry.AbiType:&#10;        if loc_abi == key:&#10;            key_ok = True&#10;            break&#10;        if loc_abi.lower() == val.split(&quot;-&quot;)[0]:&#10;            loc_abi = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(&#10;            f&quot;Cannot create entry: bad ABI key {loc_abi} vs. {PackageEntry.AbiType}.&quot;&#10;        )&#10;        is_ok = False&#10;    #&#10;    if is_ok:&#10;        return PackageEntry.objects.create(&#10;            name=data[&quot;name&quot;],&#10;            version=data[&quot;version&quot;],&#10;            os=loc_os,&#10;            arch=loc_arch,&#10;            kind=loc_kind,&#10;            abi=loc_abi,&#10;            glibc=data[&quot;glibc&quot;],&#10;            build_date=data[&quot;build_date&quot;],&#10;            package=str(file),&#10;        )&#10;    return None&#10;&#10;&#10;def get_entry_count():&#10;    &quot;&quot;&quot;&#10;&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    query = PackageEntry.objects.all()&#10;    name_list = []&#10;    for q in query:&#10;        name_list.append(q.name)&#10;    name_list = list(set(name_list))&#10;    return len(name_list)&#10;&#10;&#10;def get_namelist(get_filter: dict):&#10;    &quot;&quot;&quot;&#10;&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = convert_filter(get_filter)&#10;    query = PackageEntry.objects.all()&#10;    name_list = []&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        name_list.append(q.name)&#10;    name_list = list(set(name_list))&#10;    name_list.sort()&#10;    return name_list&#10;&#10;&#10;def sort_a(infos):&#10;    &quot;&quot;&quot;&#10;    Sort package versions and flavors.&#10;&#10;    :param infos: Package information dictionary&#10;    :return: Sorted package information&#10;    &quot;&quot;&quot;&#10;    from copy import deepcopy&#10;&#10;    def safe_int(val):&#10;        &quot;&quot;&quot;&#10;        Convert string to int safely.&#10;&#10;        :param val: Value to convert&#10;        :return: Integer or original value&#10;        &quot;&quot;&quot;&#10;        try:&#10;            return int(val)&#10;        except:&#10;            return val&#10;&#10;    skey = sorted(&#10;        infos[&quot;versions&quot;].keys(),&#10;        key=lambda vers: [safe_int(i) for i in vers.split(&quot;.&quot;)],&#10;        reverse=True,&#10;    )&#10;    s_infos = deepcopy(infos)&#10;    s_infos[&quot;versions&quot;] = {}&#10;    for key in skey:&#10;        s_infos[&quot;versions&quot;][key] = {&#10;            &quot;flavors&quot;: sorted(&#10;                infos[&quot;versions&quot;][key][&quot;flavors&quot;],&#10;                key=lambda flavor: flavor[&quot;build_date&quot;],&#10;                reverse=True,&#10;            )&#10;        }&#10;    return s_infos&#10;&#10;&#10;def get_package_detail(name: str, get_filter: dict = {}):&#10;    &quot;&quot;&quot;&#10;    Get detailed information about a package including versions and dependencies.&#10;&#10;    :param name: Package name&#10;    :param get_filter: Filter criteria&#10;    :return: Dictionary with package details&#10;    &quot;&quot;&quot;&#10;    it = {&#10;        &quot;name&quot;: name,&#10;        &quot;versions&quot;: {},&#10;        &quot;description&quot;: &quot;&quot;,&#10;    }&#10;    true_filter = convert_filter(get_filter)&#10;    query = PackageEntry.objects.filter(name=name)&#10;&#10;    # Collect all entries sorted by date for description search&#10;    all_entries = []&#10;&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        q.check_file()&#10;        if q.build_date is None:&#10;            q.build_date = old_date&#10;            q.save()&#10;&#10;        all_entries.append(q)&#10;&#10;        combination = {&#10;            &quot;os&quot;: q.get_os_display(),&#10;            &quot;arch&quot;: q.get_arch_display(),&#10;            &quot;kind&quot;: q.get_kind_display(),&#10;            &quot;abi&quot;: q.get_abi_display(),&#10;            &quot;glibc&quot;: q.glibc,&#10;            &quot;build_date&quot;: q.build_date,&#10;            &quot;package&quot;: q.package,&#10;            &quot;package_size&quot;: q.get_pretty_size_display(),&#10;            &quot;pk&quot;: q.pk,&#10;            &quot;dependencies&quot;: [],&#10;        }&#10;&#10;        # Parse dependencies for this specific flavor&#10;        if q.dependencies and q.dependencies.strip():&#10;            try:&#10;                # Log for debugging&#10;                logger.debug(f&quot;Parsing dependencies for {q.name}/{q.version}: {q.dependencies}&quot;)&#10;                parsed_deps = eval(q.dependencies)&#10;                if isinstance(parsed_deps, list):&#10;                    combination[&quot;dependencies&quot;] = parsed_deps&#10;                    logger.debug(f&quot;Successfully parsed {len(parsed_deps)} dependencies&quot;)&#10;                else:&#10;                    logger.warning(f&quot;Dependencies is not a list: {type(parsed_deps)}&quot;)&#10;            except Exception as e:&#10;                logger.warning(&#10;                    f&quot;Cannot parse dependencies of ({q.name}/{q.version}) '{q.dependencies}' : {e}&quot;&#10;                )&#10;                combination[&quot;dependencies&quot;] = []&#10;&#10;        if q.version not in it[&quot;versions&quot;].keys():&#10;            it[&quot;versions&quot;][q.version] = {&quot;flavors&quot;: []}&#10;        it[&quot;versions&quot;][q.version][&quot;flavors&quot;].append(combination)&#10;&#10;    # Search for description in entries sorted by build_date (most recent first)&#10;    sorted_entries = sorted(all_entries, key=lambda x: x.build_date, reverse=True)&#10;    for entry in sorted_entries:&#10;        if entry.description:&#10;            it[&quot;description&quot;] = entry.description&#10;            break&#10;&#10;    return sort_a(it)&#10;&#10;&#10;def get_package_list(get_filter):&#10;    &quot;&quot;&quot;&#10;&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    names = get_namelist(get_filter)&#10;    result = []&#10;    for name in names:&#10;        result.append(get_package_detail(name, get_filter))&#10;    return result&#10;&#10;&#10;def get_packages_urls(get_filter: dict):&#10;    &quot;&quot;&quot;&#10;&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = convert_filter(get_filter)&#10;    for key in true_filter.keys():&#10;        if key in get_filter:&#10;            if get_filter[key] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;                true_filter[key] = get_filter[key]&#10;    query = PackageEntry.objects.all()&#10;    url_list = []&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        q.check_file()&#10;        url_list.append(q.package)&#10;    return url_list&#10;&#10;&#10;def delete_packages(delete_filter: dict):&#10;    &quot;&quot;&quot;&#10;&#10;    :param delete_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = convert_filter(delete_filter)&#10;    for key in true_filter.keys():&#10;        if key in delete_filter:&#10;            if delete_filter[key] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;                true_filter[key] = delete_filter[key]&#10;    query = PackageEntry.objects.all()&#10;    count = 0&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        q.check_file()&#10;        count += 1&#10;        q.delete()&#10;    return count&#10;" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Package models.&#10;&quot;&quot;&quot;&#10;&#10;from datetime import datetime&#10;from pathlib import Path&#10;&#10;from django.db import models&#10;from django.utils import timezone&#10;&#10;from pack.logger import logger&#10;from scripts.settings import MEDIA_ROOT&#10;&#10;old_date = datetime.fromisoformat(&quot;2000-01-01T00:00:00+0000&quot;)&#10;&#10;&#10;# Create your models here.&#10;class PackageEntry(models.Model):&#10;    &quot;&quot;&quot;&#10;    Package in the list.&#10;    &quot;&quot;&quot;&#10;&#10;    OsType = ((&quot;l&quot;, &quot;Linux&quot;), (&quot;w&quot;, &quot;Windows&quot;), (&quot;a&quot;, &quot;any&quot;))&#10;    ArchType = ((&quot;x&quot;, &quot;x86_64&quot;), (&quot;a&quot;, &quot;aarch64&quot;), (&quot;y&quot;, &quot;any&quot;))&#10;    KindType = ((&quot;r&quot;, &quot;shared&quot;), (&quot;t&quot;, &quot;static&quot;), (&quot;h&quot;, &quot;header&quot;), (&quot;a&quot;, &quot;any&quot;))&#10;    AbiType = ((&quot;g&quot;, &quot;gnu-like&quot;), (&quot;l&quot;, &quot;llvm&quot;), (&quot;m&quot;, &quot;msvc-like&quot;), (&quot;a&quot;, &quot;any&quot;))&#10;&#10;    name = models.CharField(max_length=60, verbose_name=&quot;Package's Name.&quot;)&#10;    version = models.CharField(max_length=25, verbose_name=&quot;Package's Version.&quot;)&#10;    os = models.CharField(&#10;        max_length=1, choices=OsType, verbose_name=&quot;Package's Operating System.&quot;&#10;    )&#10;    glibc = models.CharField(&#10;        max_length=25, default=&quot;&quot;, verbose_name=&quot;Package's glibc Version if applicable.&quot;&#10;    )&#10;    arch = models.CharField(&#10;        max_length=1, choices=ArchType, verbose_name=&quot;Package's CPU Architecture.&quot;&#10;    )&#10;    kind = models.CharField(&#10;        max_length=1, choices=KindType, verbose_name=&quot;Package's kind.&quot;&#10;    )&#10;    abi = models.CharField(&#10;        max_length=1, choices=AbiType, verbose_name=&quot;Package's abi type.&quot;, default=&quot;g&quot;&#10;    )&#10;    build_date = models.DateTimeField(&#10;        default=old_date,&#10;        verbose_name=&quot;Date of Build&quot;,&#10;    )&#10;    date = models.DateTimeField(default=timezone.now, verbose_name=&quot;Date of Upload&quot;)&#10;    package = models.FileField(upload_to=&quot;packages&quot;, verbose_name=&quot;Package file&quot;)&#10;&#10;    dependencies = models.TextField(&#10;        default=&quot;&quot;, verbose_name=&quot;Package dependencies&quot;, blank=True&#10;    )&#10;    description = models.TextField(&#10;        default=&quot;&quot;, verbose_name=&quot;Package description&quot;, blank=True&#10;    )&#10;&#10;    class Meta:&#10;        &quot;&quot;&quot;&#10;        Metadata for the packages&#10;        &quot;&quot;&quot;&#10;&#10;        verbose_name = &quot;C++ Package repository item&quot;&#10;&#10;    def check_file(self):&#10;        &quot;&quot;&quot;&#10;        Check if the file is relative to MEDIA_ROOT, and correct if not.&#10;        &quot;&quot;&quot;&#10;        file_path = str(self.package)&#10;&#10;        # Si le chemin commence par /data/ au lieu de /app/data/&#10;        if file_path.startswith(&quot;/data/&quot;):&#10;            # Convertir en chemin relatif&#10;            relative_path = file_path.replace(&quot;/data/&quot;, &quot;&quot;)&#10;            self.package = relative_path&#10;            self.save(update_fields=[&quot;package&quot;])&#10;            logger.info(f&quot;Corrected path from {file_path} to {relative_path}&quot;)&#10;&#10;        # Si le chemin est absolu et commence par MEDIA_ROOT&#10;        elif file_path.startswith(str(MEDIA_ROOT)):&#10;            relative_path = file_path.replace(str(MEDIA_ROOT) + &quot;/&quot;, &quot;&quot;)&#10;            self.package = relative_path&#10;            self.save(update_fields=[&quot;package&quot;])&#10;            logger.info(f&quot;Corrected absolute path to relative: {relative_path}&quot;)&#10;&#10;    def save(self, *args, **kwargs):&#10;        &quot;&quot;&quot;&#10;        Overload of the save procedure to check the date&#10;        :param args:&#10;        :param kwargs:&#10;        &quot;&quot;&quot;&#10;        self.date = timezone.now()&#10;        super(PackageEntry, self).save(*args, **kwargs)&#10;&#10;    def delete(self, keep_file: bool = False, *args, **kwargs):&#10;        &quot;&quot;&quot;&#10;&#10;        :param keep_file:&#10;        :param args:&#10;        :param kwargs:&#10;        &quot;&quot;&quot;&#10;        if Path(self.package.path).exists() and not keep_file:&#10;            self.package.delete()&#10;        super(PackageEntry, self).delete(*args, **kwargs)&#10;&#10;    def match(self, match_to):&#10;        &quot;&quot;&quot;&#10;&#10;        :param match_to:&#10;        :return:&#10;        &quot;&quot;&quot;&#10;        from fnmatch import translate&#10;        from re import compile&#10;&#10;        for attr in [&quot;name&quot;, &quot;version&quot;, &quot;os&quot;, &quot;arch&quot;, &quot;kind&quot;, &quot;abi&quot;, &quot;glibc&quot;]:&#10;            object_attr = getattr(self, attr)&#10;            if attr in [&quot;os&quot;, &quot;arch&quot;, &quot;kind&quot;, &quot;abi&quot;]:&#10;                if match_to[attr] == &quot;any&quot; or object_attr == &quot;any&quot;:&#10;                    # if any, skip the check&#10;                    continue&#10;                if len(match_to[attr]) == 1:&#10;                    if match_to[attr] == &quot;*&quot;:&#10;                        # if match_to[attr] is &quot;*&quot;, skip the check&#10;                        continue&#10;                    if match_to[attr] != object_attr:&#10;                        return False&#10;                    continue&#10;            if not compile(translate(match_to[attr])).match(object_attr):&#10;                return False&#10;        return True&#10;&#10;    def to_dep_entry(self):&#10;        &quot;&quot;&quot;&#10;&#10;        :return:&#10;        &quot;&quot;&quot;&#10;        if self.glibc == &quot;&quot;:&#10;            return f&quot;{self.name}/{self.version} ({self.build_date.isoformat()}) [{self.get_arch_display()}, {self.get_kind_display()}, {self.get_os_display()}, {self.get_abi_display()}]&quot;&#10;        return f&quot;{self.name}/{self.version} ({self.build_date.isoformat()}) [{self.get_arch_display()}, {self.get_kind_display()}, {self.get_os_display()}, {self.get_abi_display()}, {self.glibc}]&quot;&#10;&#10;    def get_pretty_size_display(self):&#10;        &quot;&quot;&quot;&#10;&#10;        :return:&#10;        &quot;&quot;&quot;&#10;        if not Path(self.package.path).exists():&#10;            return f&quot;(void)&quot;&#10;        raw_size = Path(self.package.path).stat().st_size&#10;        for unite in [&quot;&quot;, &quot;K&quot;, &quot;M&quot;, &quot;G&quot;, &quot;T&quot;]:&#10;            if raw_size &lt; 1024.0:&#10;                break&#10;            raw_size /= 1024.0&#10;        return f&quot;{raw_size:.2f} {unite}&quot;&#10;&#10;&#10;def convert_filter(get_filter: dict):&#10;    &quot;&quot;&quot;&#10;    Convert the filter to a proper format.&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = {&#10;        &quot;name&quot;: &quot;*&quot;,&#10;        &quot;version&quot;: &quot;*&quot;,&#10;        &quot;os&quot;: &quot;*&quot;,&#10;        &quot;arch&quot;: &quot;*&quot;,&#10;        &quot;kind&quot;: &quot;*&quot;,&#10;        &quot;abi&quot;: &quot;*&quot;,&#10;        &quot;glibc&quot;: &quot;*&quot;,&#10;    }&#10;    if &quot;compiler&quot; in get_filter:&#10;        get_filter[&quot;abi&quot;] = get_filter[&quot;compiler&quot;]&#10;    for key in [&quot;name&quot;, &quot;version&quot;, &quot;glibc&quot;]:&#10;        if key in get_filter:&#10;            if get_filter[key] not in [None, &quot;&quot;]:&#10;                true_filter[key] = get_filter[key]&#10;    for key in [&quot;glibc&quot;, &quot;os&quot;, &quot;arch&quot;, &quot;abi&quot;]:&#10;        if key in get_filter and get_filter[key] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;            true_filter[key] = get_filter[key][0].lower()&#10;    if &quot;kind&quot; in get_filter and get_filter[&quot;kind&quot;] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;        if get_filter[&quot;kind&quot;] == &quot;shared&quot;:&#10;            true_filter[&quot;kind&quot;] = &quot;r&quot;&#10;        elif get_filter[&quot;kind&quot;] == &quot;static&quot;:&#10;            true_filter[&quot;kind&quot;] = &quot;t&quot;&#10;        elif get_filter[&quot;kind&quot;] == &quot;header&quot;:&#10;            true_filter[&quot;kind&quot;] = &quot;h&quot;&#10;    return true_filter&#10;&#10;&#10;def safe_create(data: dict, file: Path):&#10;    &quot;&quot;&quot;&#10;&#10;    :param data:&#10;    :param file:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    is_ok = True&#10;    for key in [&#10;        &quot;name&quot;,&#10;        &quot;version&quot;,&#10;        &quot;os&quot;,&#10;        &quot;arch&quot;,&#10;        &quot;kind&quot;,&#10;        &quot;abi&quot;,&#10;        &quot;glibc&quot;,&#10;        &quot;build_date&quot;,&#10;    ]:&#10;        if key not in data.keys():&#10;            is_ok = False&#10;            logger.warning(f&quot;Cannot create entry: missing key {key}&quot;)&#10;    if not file.exists():&#10;        logger.warning(f&quot;Cannot create entry: file does not exists.&quot;)&#10;        is_ok = False&#10;    key_ok = False&#10;    loc_os = data[&quot;os&quot;]&#10;    for key, val in PackageEntry.OsType:&#10;        if loc_os == key:&#10;            key_ok = True&#10;            break&#10;        if loc_os == val:&#10;            loc_os = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(f&quot;Cannot create entry: bad OS key.&quot;)&#10;        is_ok = False&#10;    #&#10;    key_ok = False&#10;    loc_arch = data[&quot;arch&quot;]&#10;    for key, val in PackageEntry.ArchType:&#10;        if loc_arch == key:&#10;            key_ok = True&#10;            break&#10;        if loc_arch.lower() == val:&#10;            loc_arch = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(&#10;            f&quot;Cannot create entry: bad ARCH key: {loc_arch} vs. {PackageEntry.ArchType}.&quot;&#10;        )&#10;        is_ok = False&#10;    #&#10;    key_ok = False&#10;    loc_kind = data[&quot;kind&quot;]&#10;    for key, val in PackageEntry.KindType:&#10;        if loc_kind == key:&#10;            key_ok = True&#10;            break&#10;        if loc_kind.lower() == val:&#10;            loc_kind = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(&#10;            f&quot;Cannot create entry: bad KIND key {loc_kind} vs. {PackageEntry.KindType}.&quot;&#10;        )&#10;        is_ok = False&#10;    #&#10;    key_ok = False&#10;    loc_abi = data[&quot;abi&quot;]&#10;    for key, val in PackageEntry.AbiType:&#10;        if loc_abi == key:&#10;            key_ok = True&#10;            break&#10;        if loc_abi.lower() == val.split(&quot;-&quot;)[0]:&#10;            loc_abi = key&#10;            key_ok = True&#10;            break&#10;    if not key_ok:&#10;        logger.warning(&#10;            f&quot;Cannot create entry: bad ABI key {loc_abi} vs. {PackageEntry.AbiType}.&quot;&#10;        )&#10;        is_ok = False&#10;    #&#10;    if is_ok:&#10;        return PackageEntry.objects.create(&#10;            name=data[&quot;name&quot;],&#10;            version=data[&quot;version&quot;],&#10;            os=loc_os,&#10;            arch=loc_arch,&#10;            kind=loc_kind,&#10;            abi=loc_abi,&#10;            glibc=data[&quot;glibc&quot;],&#10;            build_date=data[&quot;build_date&quot;],&#10;            package=str(file),&#10;        )&#10;    return None&#10;&#10;&#10;def get_entry_count():&#10;    &quot;&quot;&quot;&#10;&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    query = PackageEntry.objects.all()&#10;    name_list = []&#10;    for q in query:&#10;        name_list.append(q.name)&#10;    name_list = list(set(name_list))&#10;    return len(name_list)&#10;&#10;&#10;def get_namelist(get_filter: dict):&#10;    &quot;&quot;&quot;&#10;&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = convert_filter(get_filter)&#10;    query = PackageEntry.objects.all()&#10;    name_list = []&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        name_list.append(q.name)&#10;    name_list = list(set(name_list))&#10;    name_list.sort()&#10;    return name_list&#10;&#10;&#10;def sort_a(infos):&#10;    &quot;&quot;&quot;&#10;    Sort package versions and flavors.&#10;&#10;    :param infos: Package information dictionary&#10;    :return: Sorted package information&#10;    &quot;&quot;&quot;&#10;    from copy import deepcopy&#10;&#10;    def safe_int(val):&#10;        &quot;&quot;&quot;&#10;        Convert string to int safely.&#10;&#10;        :param val: Value to convert&#10;        :return: Integer or original value&#10;        &quot;&quot;&quot;&#10;        try:&#10;            return int(val)&#10;        except:&#10;            return val&#10;&#10;    skey = sorted(&#10;        infos[&quot;versions&quot;].keys(),&#10;        key=lambda vers: [safe_int(i) for i in vers.split(&quot;.&quot;)],&#10;        reverse=True,&#10;    )&#10;    s_infos = deepcopy(infos)&#10;    s_infos[&quot;versions&quot;] = {}&#10;    for key in skey:&#10;        s_infos[&quot;versions&quot;][key] = {&#10;            &quot;flavors&quot;: sorted(&#10;                infos[&quot;versions&quot;][key][&quot;flavors&quot;],&#10;                key=lambda flavor: flavor[&quot;build_date&quot;],&#10;                reverse=True,&#10;            )&#10;        }&#10;    return s_infos&#10;&#10;&#10;def get_package_detail(name: str, get_filter: dict = {}):&#10;    &quot;&quot;&quot;&#10;    Get detailed information about a package including versions and dependencies.&#10;&#10;    :param name: Package name&#10;    :param get_filter: Filter criteria&#10;    :return: Dictionary with package details&#10;    &quot;&quot;&quot;&#10;    it = {&#10;        &quot;name&quot;: name,&#10;        &quot;versions&quot;: {},&#10;        &quot;description&quot;: &quot;&quot;,&#10;    }&#10;    true_filter = convert_filter(get_filter)&#10;    query = PackageEntry.objects.filter(name=name)&#10;&#10;    # Collect all entries sorted by date for description search&#10;    all_entries = []&#10;&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        q.check_file()&#10;        if q.build_date is None:&#10;            q.build_date = old_date&#10;            q.save()&#10;&#10;        all_entries.append(q)&#10;&#10;        combination = {&#10;            &quot;os&quot;: q.get_os_display(),&#10;            &quot;arch&quot;: q.get_arch_display(),&#10;            &quot;kind&quot;: q.get_kind_display(),&#10;            &quot;abi&quot;: q.get_abi_display(),&#10;            &quot;glibc&quot;: q.glibc,&#10;            &quot;build_date&quot;: q.build_date,&#10;            &quot;package&quot;: q.package,&#10;            &quot;package_size&quot;: q.get_pretty_size_display(),&#10;            &quot;pk&quot;: q.pk,&#10;            &quot;dependencies&quot;: [],&#10;        }&#10;&#10;        # Parse dependencies for this specific flavor&#10;        if q.dependencies and q.dependencies.strip():&#10;            try:&#10;                # Log for debugging&#10;                logger.debug(f&quot;Parsing dependencies for {q.name}/{q.version}: {q.dependencies}&quot;)&#10;                parsed_deps = eval(q.dependencies)&#10;                if isinstance(parsed_deps, list):&#10;                    combination[&quot;dependencies&quot;] = parsed_deps&#10;                    logger.debug(f&quot;Successfully parsed {len(parsed_deps)} dependencies&quot;)&#10;                else:&#10;                    logger.warning(f&quot;Dependencies is not a list: {type(parsed_deps)}&quot;)&#10;            except Exception as e:&#10;                logger.warning(&#10;                    f&quot;Cannot parse dependencies of ({q.name}/{q.version}) '{q.dependencies}' : {e}&quot;&#10;                )&#10;                combination[&quot;dependencies&quot;] = []&#10;&#10;        if q.version not in it[&quot;versions&quot;].keys():&#10;            it[&quot;versions&quot;][q.version] = {&quot;flavors&quot;: []}&#10;        it[&quot;versions&quot;][q.version][&quot;flavors&quot;].append(combination)&#10;&#10;    # Search for description in entries sorted by build_date (most recent first)&#10;    sorted_entries = sorted(all_entries, key=lambda x: x.build_date, reverse=True)&#10;    for entry in sorted_entries:&#10;        if entry.description:&#10;            it[&quot;description&quot;] = entry.description&#10;            break&#10;&#10;    return sort_a(it)&#10;&#10;&#10;def get_package_list(get_filter):&#10;    &quot;&quot;&quot;&#10;&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    names = get_namelist(get_filter)&#10;    result = []&#10;    for name in names:&#10;        result.append(get_package_detail(name, get_filter))&#10;    return result&#10;&#10;&#10;def get_packages_urls(get_filter: dict):&#10;    &quot;&quot;&quot;&#10;&#10;    :param get_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = convert_filter(get_filter)&#10;    for key in true_filter.keys():&#10;        if key in get_filter:&#10;            if get_filter[key] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;                true_filter[key] = get_filter[key]&#10;    query = PackageEntry.objects.all()&#10;    url_list = []&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        q.check_file()&#10;        url_list.append(q.package)&#10;    return url_list&#10;&#10;&#10;def delete_packages(delete_filter: dict):&#10;    &quot;&quot;&quot;&#10;&#10;    :param delete_filter:&#10;    :return:&#10;    &quot;&quot;&quot;&#10;    true_filter = convert_filter(delete_filter)&#10;    for key in true_filter.keys():&#10;        if key in delete_filter:&#10;            if delete_filter[key] not in [None, &quot;&quot;, &quot;any&quot;]:&#10;                true_filter[key] = delete_filter[key]&#10;    query = PackageEntry.objects.all()&#10;    count = 0&#10;    for q in query:&#10;        if not q.match(true_filter):&#10;            continue&#10;        q.check_file()&#10;        count += 1&#10;        q.delete()&#10;    return count" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>